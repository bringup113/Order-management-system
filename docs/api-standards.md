# API响应格式规范

## 1. 标准响应格式

所有API响应应遵循以下标准格式：

```json
{
  "total": 数量,        // 总记录数（列表接口必须）
  "page": 页码,         // 当前页码（列表接口必须）
  "limit": 每页条数,    // 每页记录数（列表接口必须）
  "data": []           // 数据内容（所有接口必须）
}
```

### 1.1 列表接口

列表接口必须包含分页信息：

```json
{
  "total": 100,        // 总记录数
  "page": 1,           // 当前页码
  "limit": 10,         // 每页记录数
  "data": [            // 数据数组
    {
      "id": 1,
      "name": "示例1",
      // 其他字段...
    },
    {
      "id": 2,
      "name": "示例2",
      // 其他字段...
    }
  ]
}
```

### 1.2 详情接口

详情接口返回单个对象：

```json
{
  "data": {            // 单个对象数据
    "id": 1,
    "name": "示例",
    // 其他字段...
  }
}
```

### 1.3 创建/更新接口

创建或更新接口返回操作后的对象：

```json
{
  "data": {            // 创建/更新后的对象
    "id": 1,
    "name": "示例",
    // 其他字段...
  }
}
```

### 1.4 删除接口

删除接口返回成功信息：

```json
{
  "data": {
    "message": "删除成功"
  }
}
```

## 2. 错误响应格式

所有错误响应应遵循以下格式：

```json
{
  "message": "错误信息",     // 错误描述（必须）
  "error": "详细错误信息"    // 详细错误（可选）
}
```

### 2.1 常见HTTP状态码

- `200 OK`: 请求成功
- `201 Created`: 资源创建成功
- `400 Bad Request`: 请求参数错误
- `401 Unauthorized`: 未授权
- `403 Forbidden`: 权限不足
- `404 Not Found`: 资源不存在
- `500 Internal Server Error`: 服务器内部错误

## 3. 请求参数规范

### 3.1 分页参数

列表接口应支持以下分页参数：

- `page`: 页码，默认为1
- `limit`: 每页条数，默认为10

### 3.2 排序参数

列表接口应支持以下排序参数：

- `sort`: 排序字段
- `order`: 排序方式，`asc`（升序）或`desc`（降序）

### 3.3 过滤参数

过滤参数应根据业务需求定义，常见的过滤参数包括：

- 精确匹配：直接使用字段名，如`status=active`
- 模糊匹配：使用字段名加后缀，如`name_like=测试`
- 范围查询：使用字段名加后缀，如`created_at_gte=2023-01-01`（大于等于）、`created_at_lte=2023-12-31`（小于等于）

## 4. 命名规范

### 4.1 URL命名

- 使用复数名词表示资源集合，如`/users`、`/products`
- 使用ID标识特定资源，如`/users/1`、`/products/2`
- 使用嵌套URL表示资源关系，如`/users/1/orders`

### 4.2 字段命名

- 使用小驼峰命名法（前端）或下划线命名法（后端）
- 保持命名一致性，避免混用不同命名风格
- 使用有意义的名称，避免使用缩写

## 5. 版本控制

API版本可以通过以下方式控制：

- URL路径：`/api/v1/users`
- 请求头：`Accept: application/vnd.company.v1+json`

当前项目使用URL路径方式进行版本控制。

## 6. 安全规范

- 所有API请求应使用HTTPS
- 敏感操作应要求身份验证
- 使用JWT进行身份验证
- 实施适当的访问控制和权限检查 