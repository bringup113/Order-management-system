import{_ as E,M as h,b as x,r as D,y as P,o as b,e as S,i as c,f as a,w as r,J as C,k as M,E as T,Q as O,t as N,A as B,L as I,n as l,X as V,z as d,Z as A,R,F as q,S as F,D as L,G as z,q as G}from"./index-518491b2.js";/* empty css                   *//* empty css                *//* empty css                 *//* empty css                        *//* empty css               *//* empty css                             */import{a as J}from"./order-8bc548e3.js";const Q={name:"OrderDetail",setup(){const v=h(),n=x(),u=D(!1),t=D(null),k=async()=>{const o=v.params.id;if(!o){T.error("订单ID不能为空");return}u.value=!0;try{const e=await J(o);t.value=O(e)}catch(e){console.error("获取订单详情失败:",e),T.error("获取订单详情失败"),t.value={id:o,orderNo:"ORD20230001",orderDate:"2023-01-15",orderStatus:"processing",paymentStatus:"partial",totalAmount:5e3,createdAt:"2023-01-15 10:30:00",remarks:"这是一个测试订单",passport:{name:"张三",passportNo:"E12345678",nationality:"中国"},agent:{name:"北京旅行社",contactPerson:"赵六",contactPhone:"13600136000"},orderItems:[{id:1,product:{name:"日本东京5日游",type:"tour"},unitPrice:3e3,quantity:1,subtotal:3e3,remarks:"含机票和酒店"},{id:2,product:{name:"东京-大阪单程机票",type:"flight"},unitPrice:1e3,quantity:2,subtotal:2e3,remarks:"经济舱"}]}}finally{u.value=!1}},w=()=>{n.back()},m=()=>{n.push({name:"OrderEdit",params:{id:t.value.id}})},s=o=>({pending:"待处理",processing:"处理中",completed:"已完成",cancelled:"已取消"})[o]||o,_=o=>({pending:"warning",processing:"primary",completed:"success",cancelled:"danger"})[o]||"",p=o=>({unpaid:"未支付",partial:"部分支付",paid:"已支付"})[o]||o,i=o=>({unpaid:"danger",partial:"warning",paid:"success"})[o]||"",y=o=>({tour:"旅游产品",hotel:"酒店",flight:"机票",other:"其他"})[o]||o,f=o=>`¥ ${parseFloat(o).toFixed(2)}`,g=o=>o?new Date(o).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"";return P(()=>{k()}),{loading:u,order:t,goBack:w,handleEdit:m,getOrderStatusText:s,getOrderStatusType:_,getPaymentStatusText:p,getPaymentStatusType:i,getProductTypeText:y,formatCurrency:f,formatDateTime:g}}},U={class:"order-detail-container"},X={class:"page-header"},Z={class:"header-actions"};function j(v,n,u,t,k,w){const m=N,s=R,_=q,p=F,i=L,y=z,f=G,g=B,o=I;return b(),S("div",U,[c("div",X,[n[3]||(n[3]=c("h1",null,"订单详情",-1)),c("div",Z,[a(m,{onClick:t.goBack},{default:r(()=>n[1]||(n[1]=[l("返回")])),_:1},8,["onClick"]),a(m,{type:"primary",onClick:t.handleEdit},{default:r(()=>n[2]||(n[2]=[l("编辑订单")])),_:1},8,["onClick"])])]),C((b(),M(g,{class:"detail-card"},{default:r(()=>[t.order?(b(),S(V,{key:0},[n[4]||(n[4]=c("div",{class:"section-title"},"基本信息",-1)),a(p,{column:3,border:""},{default:r(()=>[a(s,{label:"订单编号"},{default:r(()=>[l(d(t.order.orderNo),1)]),_:1}),a(s,{label:"下单日期"},{default:r(()=>[l(d(t.order.orderDate),1)]),_:1}),a(s,{label:"订单状态"},{default:r(()=>[a(_,{type:t.getOrderStatusType(t.order.orderStatus)},{default:r(()=>[l(d(t.getOrderStatusText(t.order.orderStatus)),1)]),_:1},8,["type"])]),_:1}),a(s,{label:"支付状态"},{default:r(()=>[a(_,{type:t.getPaymentStatusType(t.order.paymentStatus)},{default:r(()=>[l(d(t.getPaymentStatusText(t.order.paymentStatus)),1)]),_:1},8,["type"])]),_:1}),a(s,{label:"订单金额"},{default:r(()=>[l(d(t.formatCurrency(t.order.totalAmount)),1)]),_:1}),a(s,{label:"创建时间"},{default:r(()=>[l(d(t.formatDateTime(t.order.createdAt)),1)]),_:1})]),_:1}),n[5]||(n[5]=c("div",{class:"section-title"},"客户信息",-1)),a(p,{column:3,border:""},{default:r(()=>[a(s,{label:"客户姓名"},{default:r(()=>{var e;return[l(d((e=t.order.passport)==null?void 0:e.name),1)]}),_:1}),a(s,{label:"护照号码"},{default:r(()=>{var e;return[l(d((e=t.order.passport)==null?void 0:e.passportNo),1)]}),_:1}),a(s,{label:"国籍"},{default:r(()=>{var e;return[l(d((e=t.order.passport)==null?void 0:e.nationality),1)]}),_:1})]),_:1}),n[6]||(n[6]=c("div",{class:"section-title"},"代理商信息",-1)),a(p,{column:3,border:""},{default:r(()=>[a(s,{label:"代理商名称"},{default:r(()=>{var e;return[l(d((e=t.order.agent)==null?void 0:e.name),1)]}),_:1}),a(s,{label:"联系人"},{default:r(()=>{var e;return[l(d((e=t.order.agent)==null?void 0:e.contactPerson),1)]}),_:1}),a(s,{label:"联系电话"},{default:r(()=>{var e;return[l(d((e=t.order.agent)==null?void 0:e.contactPhone),1)]}),_:1})]),_:1}),n[7]||(n[7]=c("div",{class:"section-title"},"订单项目",-1)),a(y,{data:t.order.orderItems,border:"",style:{width:"100%"}},{default:r(()=>[a(i,{prop:"product.name",label:"产品名称","min-width":"180"}),a(i,{prop:"product.type",label:"产品类型",width:"120"},{default:r(e=>[l(d(t.getProductTypeText(e.row.product.type)),1)]),_:1}),a(i,{prop:"unitPrice",label:"单价",width:"120"},{default:r(e=>[l(d(t.formatCurrency(e.row.unitPrice)),1)]),_:1}),a(i,{prop:"quantity",label:"数量",width:"80"}),a(i,{prop:"subtotal",label:"小计",width:"120"},{default:r(e=>[l(d(t.formatCurrency(e.row.subtotal)),1)]),_:1}),a(i,{prop:"remarks",label:"备注","min-width":"150"})]),_:1},8,["data"]),n[8]||(n[8]=c("div",{class:"section-title"},"备注信息",-1)),a(f,{type:"textarea",rows:3,modelValue:t.order.remarks,"onUpdate:modelValue":n[0]||(n[0]=e=>t.order.remarks=e),readonly:"",placeholder:"暂无备注"},null,8,["modelValue"])],64)):A("",!0)]),_:1})),[[o,t.loading]])])}const rt=E(Q,[["render",j],["__scopeId","data-v-282f8ba0"]]);export{rt as default};
