import{_ as x,M as P,b as R,r as v,x as k,c as y,y as q,o as A,e as U,i as b,z as F,f as a,w as l,E as V,A as C,n as p,q as w,s as D,a2 as N,N as B,O as I,t as h,g as M}from"./index-518491b2.js";/* empty css                *//* empty css                     *//* empty css                 *//* empty css                 *//* empty css                        */import{a as O,u as j,c as z}from"./agent-3ef5046f.js";const G={name:"AgentForm",setup(){const u=P(),e=R(),g=v(null),o=v(!1),s=k(()=>u.name==="AgentEdit"),m=y({id:null,name:"",contactPerson:"",contactPhone:"",email:"",address:"",commissionRate:10,status:"active",remark:""}),n={name:[{required:!0,message:"请输入代理名称",trigger:"blur"}],contactPerson:[{required:!0,message:"请输入联系人姓名",trigger:"blur"}],contactPhone:[{required:!0,message:"请输入联系电话",trigger:"blur"}],email:[{required:!0,message:"请输入电子邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],commissionRate:[{required:!0,message:"请输入佣金比例",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},r=i=>{o.value=!0,O(i).then(d=>{Object.assign(m,d.data)}).catch(d=>{console.error("获取代理详情失败",d),V.error("获取代理详情失败"),Object.assign(m,{id:i,name:"北京旅行社",contactPerson:"赵六",contactPhone:"13600136000",email:"zhaoliu@example.com",address:"北京市朝阳区建国路1号",commissionRate:15,status:"active",remark:"这是一个备注"})}).finally(()=>{o.value=!1})},_=()=>{g.value.validate(i=>{if(i)o.value=!0,(s.value?j(m.id,m):z(m)).then(()=>{V.success(s.value?"修改成功":"添加成功"),e.push("/agent/list")}).catch(f=>{console.error(s.value?"修改代理失败":"添加代理失败",f),V.error(s.value?"修改代理失败":"添加代理失败")}).finally(()=>{o.value=!1});else return!1})},c=()=>{e.push("/agent/list")};return q(()=>{s.value&&u.params.id&&r(u.params.id)}),{formRef:g,form:m,rules:n,loading:o,isEdit:s,submitForm:_,cancel:c}}},S={class:"agent-form-container"},T={class:"agent-form-header"};function H(u,e,g,o,s,m){const n=w,r=D,_=N,c=B,i=I,d=h,f=M,E=C;return A(),U("div",S,[b("div",T,[b("h2",null,F(o.isEdit?"编辑代理":"新增代理"),1)]),a(E,{class:"form-container"},{default:l(()=>[a(f,{ref:"formRef",model:o.form,rules:o.rules,"label-width":"120px","label-position":"right"},{default:l(()=>[a(r,{label:"代理名称",prop:"name"},{default:l(()=>[a(n,{modelValue:o.form.name,"onUpdate:modelValue":e[0]||(e[0]=t=>o.form.name=t),placeholder:"请输入代理名称"},null,8,["modelValue"])]),_:1}),a(r,{label:"联系人",prop:"contactPerson"},{default:l(()=>[a(n,{modelValue:o.form.contactPerson,"onUpdate:modelValue":e[1]||(e[1]=t=>o.form.contactPerson=t),placeholder:"请输入联系人姓名"},null,8,["modelValue"])]),_:1}),a(r,{label:"联系电话",prop:"contactPhone"},{default:l(()=>[a(n,{modelValue:o.form.contactPhone,"onUpdate:modelValue":e[2]||(e[2]=t=>o.form.contactPhone=t),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1}),a(r,{label:"电子邮箱",prop:"email"},{default:l(()=>[a(n,{modelValue:o.form.email,"onUpdate:modelValue":e[3]||(e[3]=t=>o.form.email=t),placeholder:"请输入电子邮箱"},null,8,["modelValue"])]),_:1}),a(r,{label:"地址",prop:"address"},{default:l(()=>[a(n,{modelValue:o.form.address,"onUpdate:modelValue":e[4]||(e[4]=t=>o.form.address=t),placeholder:"请输入地址"},null,8,["modelValue"])]),_:1}),a(r,{label:"佣金比例",prop:"commissionRate"},{default:l(()=>[a(_,{modelValue:o.form.commissionRate,"onUpdate:modelValue":e[5]||(e[5]=t=>o.form.commissionRate=t),precision:2,step:.1,min:0,max:100,style:{width:"200px"}},null,8,["modelValue"]),e[8]||(e[8]=b("span",{class:"commission-unit"},"%",-1))]),_:1}),a(r,{label:"状态",prop:"status"},{default:l(()=>[a(i,{modelValue:o.form.status,"onUpdate:modelValue":e[6]||(e[6]=t=>o.form.status=t)},{default:l(()=>[a(c,{label:"active"},{default:l(()=>e[9]||(e[9]=[p("启用")])),_:1}),a(c,{label:"inactive"},{default:l(()=>e[10]||(e[10]=[p("禁用")])),_:1})]),_:1},8,["modelValue"])]),_:1}),a(r,{label:"备注",prop:"remark"},{default:l(()=>[a(n,{modelValue:o.form.remark,"onUpdate:modelValue":e[7]||(e[7]=t=>o.form.remark=t),type:"textarea",placeholder:"请输入备注信息",rows:3},null,8,["modelValue"])]),_:1}),a(r,null,{default:l(()=>[a(d,{type:"primary",onClick:o.submitForm,loading:o.loading},{default:l(()=>e[11]||(e[11]=[p("保存")])),_:1},8,["onClick","loading"]),a(d,{onClick:o.cancel},{default:l(()=>e[12]||(e[12]=[p("取消")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])]),_:1})])}const Z=x(G,[["render",H],["__scopeId","data-v-4bcff05d"]]);export{Z as default};
