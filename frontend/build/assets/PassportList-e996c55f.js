import{_ as z,b as k,r as b,c as E,y as N,o as w,e as q,i as P,f as t,w as l,H as V,E as v,I as x,t as D,A as L,n as p,J as S,k as B,z as T,q as U,s as I,g as Q,D as M,G as F,K as R,L as j}from"./index-518491b2.js";/* empty css                   *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                 *//* empty css                        *//* empty css                *//* empty css                     */import{g as A,d as G}from"./passport-f309c118.js";const H={name:"PassportList",setup(){const c=k(),e=b(!1),f=b([]),a=b(0),r=E({name:"",passportNo:"",nationality:"",pageNum:1,pageSize:10}),d=()=>{e.value=!0,A(r).then(n=>{const{data:o,total:g}=V(n);f.value=o,a.value=g}).catch(n=>{console.error("获取护照列表失败",n),v.error("获取护照列表失败")}).finally(()=>{e.value=!1})},i=()=>{r.pageNum=1,d()},u=()=>{r.name="",r.passportNo="",r.nationality="",r.pageNum=1,d()},m=()=>{c.push("/customer/passport/create")},y=n=>{c.push(`/customer/passport/edit/${n.id}`)},_=n=>{c.push(`/customer/passport/detail/${n.id}`)},s=n=>{x.confirm("确认删除该护照信息吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{G(n.id).then(()=>{v.success("删除成功"),d()}).catch(o=>{console.error("删除护照失败",o),v.error("删除护照失败")})}).catch(()=>{})},C=n=>{r.pageSize=n,d()},h=n=>{r.pageNum=n,d()};return N(()=>{d()}),{loading:e,passportList:f,total:a,queryParams:r,handleQuery:i,resetQuery:u,handleCreate:m,handleEdit:y,handleDetail:_,handleDelete:s,handleSizeChange:C,handleCurrentChange:h}}},J={class:"passport-list-container"},K={class:"passport-list-header"},O={class:"pagination-container"};function W(c,e,f,a,r,d){const i=D,u=U,m=I,y=Q,_=L,s=M,C=F,h=R,n=j;return w(),q("div",J,[P("div",K,[e[6]||(e[6]=P("h2",null,"护照管理",-1)),t(i,{type:"primary",onClick:a.handleCreate},{default:l(()=>e[5]||(e[5]=[p("新增护照")])),_:1},8,["onClick"])]),t(_,{class:"filter-container"},{default:l(()=>[t(y,{inline:!0,model:a.queryParams,class:"demo-form-inline"},{default:l(()=>[t(m,{label:"客户姓名"},{default:l(()=>[t(u,{modelValue:a.queryParams.name,"onUpdate:modelValue":e[0]||(e[0]=o=>a.queryParams.name=o),placeholder:"请输入客户姓名",clearable:""},null,8,["modelValue"])]),_:1}),t(m,{label:"护照号码"},{default:l(()=>[t(u,{modelValue:a.queryParams.passportNo,"onUpdate:modelValue":e[1]||(e[1]=o=>a.queryParams.passportNo=o),placeholder:"请输入护照号码",clearable:""},null,8,["modelValue"])]),_:1}),t(m,{label:"国籍"},{default:l(()=>[t(u,{modelValue:a.queryParams.nationality,"onUpdate:modelValue":e[2]||(e[2]=o=>a.queryParams.nationality=o),placeholder:"请输入国籍",clearable:""},null,8,["modelValue"])]),_:1}),t(m,null,{default:l(()=>[t(i,{type:"primary",onClick:a.handleQuery},{default:l(()=>e[7]||(e[7]=[p("查询")])),_:1},8,["onClick"]),t(i,{onClick:a.resetQuery},{default:l(()=>e[8]||(e[8]=[p("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),t(_,{class:"table-container"},{default:l(()=>[S((w(),B(C,{data:a.passportList,border:"",style:{width:"100%"}},{default:l(()=>[t(s,{prop:"name",label:"客户姓名",width:"120"}),t(s,{prop:"passportNo",label:"护照号码",width:"150"}),t(s,{prop:"nationality",label:"国籍",width:"120"}),t(s,{prop:"gender",label:"性别",width:"80"},{default:l(o=>[p(T(o.row.gender==="male"?"男":"女"),1)]),_:1}),t(s,{prop:"birthDate",label:"出生日期",width:"120"}),t(s,{prop:"issueDate",label:"签发日期",width:"120"}),t(s,{prop:"expiryDate",label:"有效期至",width:"120"}),t(s,{label:"操作",width:"200"},{default:l(o=>[t(i,{size:"small",type:"primary",onClick:g=>a.handleEdit(o.row)},{default:l(()=>e[9]||(e[9]=[p("编辑")])),_:2},1032,["onClick"]),t(i,{size:"small",type:"success",onClick:g=>a.handleDetail(o.row)},{default:l(()=>e[10]||(e[10]=[p("详情")])),_:2},1032,["onClick"]),t(i,{size:"small",type:"danger",onClick:g=>a.handleDelete(o.row)},{default:l(()=>e[11]||(e[11]=[p("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[n,a.loading]]),P("div",O,[t(h,{"current-page":a.queryParams.pageNum,"onUpdate:currentPage":e[3]||(e[3]=o=>a.queryParams.pageNum=o),"page-size":a.queryParams.pageSize,"onUpdate:pageSize":e[4]||(e[4]=o=>a.queryParams.pageSize=o),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:a.total,onSizeChange:a.handleSizeChange,onCurrentChange:a.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1})])}const re=z(H,[["render",W],["__scopeId","data-v-ff5dfb60"]]);export{re as default};
