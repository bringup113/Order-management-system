import{_ as x,b as V,r as C,c as S,y as A,o as w,e as L,i as b,f as e,w as o,H as N,E as P,I as B,t as R,A as T,n as d,J as D,k as U,z,q as I,s as Q,V as F,W as M,g as j,D as G,F as H,G as J,K,L as O}from"./index-518491b2.js";/* empty css                   *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                 *//* empty css                        *//* empty css                *//* empty css                     */import{g as W,d as X}from"./agent-3ef5046f.js";const Y={name:"AgentList",setup(){const f=V(),a=C(!1),m=C([]),t=C(0),s=S({name:"",contactPerson:"",status:"",pageNum:1,pageSize:10}),r=()=>{a.value=!0,W(s).then(n=>{const{data:u,total:v}=N(n);m.value=u,t.value=v}).catch(n=>{console.error("获取代理列表失败",n),P.error("获取代理列表失败"),m.value=[{id:1,name:"北京旅行社",contactPerson:"赵六",contactPhone:"13600136000",email:"zhaoliu@example.com",address:"北京市朝阳区建国路1号",commissionRate:15,status:"active",createdAt:"2023-01-01 12:00:00"},{id:2,name:"上海旅游公司",contactPerson:"钱七",contactPhone:"13500135000",email:"qianqi@example.com",address:"上海市浦东新区陆家嘴1号",commissionRate:12,status:"active",createdAt:"2023-01-02 12:00:00"},{id:3,name:"广州旅游集团",contactPerson:"孙八",contactPhone:"13400134000",email:"sunba@example.com",address:"广州市天河区珠江新城5号",commissionRate:10,status:"inactive",createdAt:"2023-01-03 12:00:00"}],t.value=m.value.length}).finally(()=>{a.value=!1})},i=()=>{s.pageNum=1,r()},p=()=>{s.name="",s.contactPerson="",s.status="",s.pageNum=1,r()},c=()=>{f.push("/agent/create")},_=n=>{f.push(`/agent/edit/${n.id}`)},h=n=>{B.confirm("确认删除该代理吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{X(n.id).then(()=>{P.success("删除成功"),r()}).catch(u=>{console.error("删除代理失败",u),P.error("删除代理失败")})}).catch(()=>{})},y=n=>{s.pageSize=n,r()},g=n=>{s.pageNum=n,r()};return A(()=>{r()}),{loading:a,agentList:m,total:t,queryParams:s,handleQuery:i,resetQuery:p,handleCreate:c,handleEdit:_,handleDelete:h,handleSizeChange:y,handleCurrentChange:g}}},Z={class:"agent-list-container"},$={class:"agent-list-header"},ee={class:"pagination-container"};function ae(f,a,m,t,s,r){const i=R,p=I,c=Q,_=F,h=M,y=j,g=T,n=G,u=H,v=J,E=K,q=O;return w(),L("div",Z,[b("div",$,[a[6]||(a[6]=b("h2",null,"代理管理",-1)),e(i,{type:"primary",onClick:t.handleCreate},{default:o(()=>a[5]||(a[5]=[d("新增代理")])),_:1},8,["onClick"])]),e(g,{class:"filter-container"},{default:o(()=>[e(y,{inline:!0,model:t.queryParams,class:"demo-form-inline"},{default:o(()=>[e(c,{label:"代理名称"},{default:o(()=>[e(p,{modelValue:t.queryParams.name,"onUpdate:modelValue":a[0]||(a[0]=l=>t.queryParams.name=l),placeholder:"请输入代理名称",clearable:""},null,8,["modelValue"])]),_:1}),e(c,{label:"联系人"},{default:o(()=>[e(p,{modelValue:t.queryParams.contactPerson,"onUpdate:modelValue":a[1]||(a[1]=l=>t.queryParams.contactPerson=l),placeholder:"请输入联系人",clearable:""},null,8,["modelValue"])]),_:1}),e(c,{label:"状态"},{default:o(()=>[e(h,{modelValue:t.queryParams.status,"onUpdate:modelValue":a[2]||(a[2]=l=>t.queryParams.status=l),placeholder:"请选择状态",clearable:""},{default:o(()=>[e(_,{label:"启用",value:"active"}),e(_,{label:"禁用",value:"inactive"})]),_:1},8,["modelValue"])]),_:1}),e(c,null,{default:o(()=>[e(i,{type:"primary",onClick:t.handleQuery},{default:o(()=>a[7]||(a[7]=[d("查询")])),_:1},8,["onClick"]),e(i,{onClick:t.resetQuery},{default:o(()=>a[8]||(a[8]=[d("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),e(g,{class:"table-container"},{default:o(()=>[D((w(),U(v,{data:t.agentList,border:"",style:{width:"100%"}},{default:o(()=>[e(n,{prop:"name",label:"代理名称",width:"180"}),e(n,{prop:"contactPerson",label:"联系人",width:"120"}),e(n,{prop:"contactPhone",label:"联系电话",width:"150"}),e(n,{prop:"email",label:"电子邮箱",width:"180"}),e(n,{prop:"address",label:"地址","show-overflow-tooltip":""}),e(n,{prop:"commissionRate",label:"佣金比例",width:"120"},{default:o(l=>[d(z(l.row.commissionRate)+"% ",1)]),_:1}),e(n,{prop:"status",label:"状态",width:"100"},{default:o(l=>[e(u,{type:l.row.status==="active"?"success":"info"},{default:o(()=>[d(z(l.row.status==="active"?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),e(n,{prop:"createdAt",label:"创建时间",width:"180"}),e(n,{label:"操作",width:"180"},{default:o(l=>[e(i,{size:"small",type:"primary",onClick:k=>t.handleEdit(l.row)},{default:o(()=>a[9]||(a[9]=[d("编辑")])),_:2},1032,["onClick"]),e(i,{size:"small",type:"danger",onClick:k=>t.handleDelete(l.row)},{default:o(()=>a[10]||(a[10]=[d("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[q,t.loading]]),b("div",ee,[e(E,{"current-page":t.queryParams.pageNum,"onUpdate:currentPage":a[3]||(a[3]=l=>t.queryParams.pageNum=l),"page-size":t.queryParams.pageSize,"onUpdate:pageSize":a[4]||(a[4]=l=>t.queryParams.pageSize=l),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:t.total,onSizeChange:t.handleSizeChange,onCurrentChange:t.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1})])}const ue=x(Y,[["render",ae],["__scopeId","data-v-0acd04e6"]]);export{ue as default};
